!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t["pub-sub"]=e()}(this,function(){"use strict";function t(t,e){if([].concat(Array.prototype.slice.call(arguments)).length>=2){var n=Object.prototype.toString.apply(t);return n.substring(8,n.length-1).toLowerCase()===e.toLowerCase()}}var e={checkType:t,isFun:function(e){return t(e,"function")},log:function(t){console.log(t)},warn:function(t){console.warn(t)},error:function(t){console.error(t)}},n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}();var i=Symbol("_emitList"),r=Symbol("_eventList"),s=Symbol("_debug");return function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this[s]=e&&e.debug||!1,this[r]=new Map,this[i]=new Map}return o(t,[{key:"on",value:function(t,o,c,u){var a=this;if(e.isFun(o)){if(this[r].has(t)){var f=this[r].get(t);u?this[r].set(t,[o].concat(f)):this[r].set(t,f.concat([o]))}else this[r].set(t,[o]);if(c&&this[i].has(t)){var l=this[i].get(t);l.forEach(function(t){o.call(a,t)}),setTimeout(function(){l.forEach(function(t){o(t)})},0)}this[s]&&e.log(t+" register a handler ")}else e.error("type error:pubish handler must to be a Function , not a "+(void 0===o?"undefined":n(o)))}},{key:"once",value:function(t,e,n,o){this.on(t,function n(){e.apply(void 0,arguments),this.off(t,n)},n,o)}},{key:"emit",value:function(t){for(var n=this,o=arguments.length,c=Array(o>1?o-1:0),u=1;u<o;u++)c[u-1]=arguments[u];var a=[].concat(c);if(this[i].has(t)){var f=this[i].get(t);this[i].set(t,f.concat(a))}else this[i].set(t,[].concat(c));this[r].has(t)?this[r].get(t).forEach(function(t){a.forEach(function(e){t.call(n,e)}),n[s]&&e.log("emit "+c)}):this[s]&&e.log(t+" emit a message ")}},{key:"off",value:function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),o=1;o<e;o++)n[o-1]=arguments[o];if(this[r].has(t)){if(0===[].concat(n).length)return void this[r].set(t,[]);var i=this[r].get(t).filter(function(t){return-1===[].concat(n).indexOf(t)});this[r].set(t,i)}else;}},{key:"eventList",value:function(){return this[r]}},{key:"emitList",value:function(){return this[i]}}]),t}()});
//# sourceMappingURL=pub-sub.js.map
